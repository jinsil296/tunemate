<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.history.HistoryRepository">
    <select id="getRecommendedHistory" resultType="com.example.demo.recommendation.Recommendation">
        SELECT
            recommendation_id,
            user_id,
            unique_id,
            title,
            recommendation_type,
            track_ids,
            artist_ids,
            artist_names,
            artist_genres,
            album_image_url,
            create_dt
        FROM recommendation
        WHERE user_id = #{userId}
        ORDER BY create_dt DESC
    </select>

    <delete id="deleteHistoryById">
        DELETE FROM recommendation WHERE recommendation_id = #{recommendationId}
    </delete>
</mapper>